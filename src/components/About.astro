---
const stats = [
  { value: 15, label: "Years Experience", icon: "üèÜ" },
  { value: 200, label: "Projects Completed", icon: "‚ö°" },
];

const milestones = [
  {
    title: "Consultation",
    description: "Lets schedule a free consultation to discuss your project goals, timeline and budget.",
  },
  {
    title: "Site Visits & Estimating",
    description: "We'll visit your location to make our assessments, gather details and take measurements.",
  },
  {
    title: "Planning & Scheduling",
    description: "We pull permits! And schedule a start date that works for you.",
  },
  {
    title: "We Get To Work",
    description: "Staying steady, we maintain a clean job site and keep you informed throughout the entire process. Once the project is complete, a final walk through! To ensure safe and secure results.",
  },
];
---

<section
  id="about"
  class="relative bg-gray-950 py-36 overflow-hidden scroll-mt-[80px]"
>
  {/* Background */}
  <div class="absolute inset-0 opacity-40">
    <div class="absolute inset-0 bg-[linear-gradient(45deg,transparent_24%,rgba(255,255,255,0.05)_25%,rgba(255,255,255,0.05)_26%,transparent_27%,transparent_74%,rgba(255,255,255,0.05)_75%,rgba(255,255,255,0.05)_76%,transparent_77%)] bg-[length:40px_40px]" />
    <div class="absolute -top-20 left-1/4 w-64 h-64 rounded-full bg-yellow-500/10 blur-3xl animate-pulse" />
    <div class="absolute top-40 -right-20 w-96 h-96 rounded-full bg-yellow-600/10 blur-3xl animate-pulse [animation-delay:1s]" />
  </div>

  <div class="container mx-auto px-6 relative z-10">
    <div class="max-w-6xl mx-auto">

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-20 items-center">

        {/* Left ‚Äî About content */}
        <div class="text-left">

          <div class="reveal inline-block px-4 py-1 rounded-full bg-yellow-500/10 backdrop-blur-sm border border-yellow-500/20 mb-6">
            <span class="text-yellow-400 font-medium">Our Story</span>
          </div>

          <h2 class="reveal text-5xl font-extrabold mb-8 leading-tight" style="transition-delay: 0.1s">
            <span class="bg-linear-to-r from-yellow-300 via-yellow-400 to-yellow-600 text-transparent bg-clip-text">
              Building Connections
            </span>
          </h2>

          <p class="reveal text-xl leading-relaxed text-gray-300 mb-6" style="transition-delay: 0.2s">
            C&C isn't just a name, it's a promise that when you work with us, you'll be working with
            <span class="font-semibold text-yellow-400">people who care.</span>
            That's why we treat every project like it's our own and every client like a partner. Let's build something great together!
          </p>

          <p class="reveal text-gray-400 leading-relaxed mb-6" style="transition-delay: 0.3s">
            <span class="font-semibold text-yellow-500">C&C Construction and Electrical</span>
            provides high-quality residential, commercial, and industrial services across North Carolina. Built on a foundation of integrity and clear communication, we treat every project with the same level of care. Whether it's a small repair or large-scale construction, we deliver results without compromises.
          </p>

          <p class="reveal text-gray-400 leading-relaxed mb-8" style="transition-delay: 0.4s">
            <span class="font-semibold text-gray-300">We look forward</span>
            to the opportunity to work with you, build lasting partnerships, and earning your trust as your go-to partner for quality construction and electrical work.
          </p>

          <button
            id="about-cta"
            class="reveal group relative overflow-hidden cursor-pointer px-8 py-4 bg-black text-yellow-400 font-semibold rounded-xl border-2 border-yellow-500/50 shadow-lg shadow-yellow-600/20 inline-flex items-center hover:text-black transition-colors duration-300"
            style="transition-delay: 0.5s"
          >
            <span class="relative z-10 flex items-center">
              Learn More About Us
              <svg class="w-5 h-5 ml-2 group-hover:translate-x-2 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </span>
            <div class="absolute inset-0 bg-linear-to-r from-yellow-600 to-yellow-500 -translate-x-full group-hover:translate-x-0 transition-transform duration-300" />
          </button>
        </div>

        {/* Right ‚Äî Stats + Timeline */}
        <div class="space-y-10">

          {/* Stats */}
          <div class="grid grid-cols-2 gap-4">
            {stats.map((stat, index) => (
              <div
                class="reveal bg-black/60 backdrop-blur-lg border border-yellow-500/20 p-8 rounded-xl text-center hover:-translate-y-1 transition-transform duration-300"
                style={`transition-delay: ${0.2 + index * 0.1}s`}
              >
                <div class="text-3xl mb-3">{stat.icon}</div>
                <div class="text-4xl font-bold text-yellow-400 counter" data-target={stat.value}>
                  0+
                </div>
                <div class="text-gray-400 text-sm mt-2">{stat.label}</div>
              </div>
            ))}
          </div>

          {/* Timeline */}
          <div class="reveal bg-black/60 backdrop-blur-lg border border-yellow-500/20 p-8 rounded-xl" style="transition-delay: 0.35s">
            <h3 class="text-xl font-semibold text-white mb-8">How it works</h3>
            <div class="relative">
              <div class="absolute left-4 top-2 bottom-2 w-px bg-linear-to-b from-yellow-400 to-yellow-600" />
              {milestones.map((milestone, index) => (
                <div
                  class="reveal relative flex items-start mb-8 last:mb-0"
                  style={`transition-delay: ${0.45 + index * 0.1}s`}
                >
                  <div class="flex-shrink-0 relative z-10">
                    <div class="w-8 h-8 rounded-full bg-linear-to-r from-yellow-400 to-yellow-600 flex items-center justify-center shadow-lg shadow-yellow-500/20">
                      <div class="w-6 h-6 rounded-full bg-black flex items-center justify-center">
                        <div class="w-4 h-4 rounded-full bg-linear-to-r from-yellow-400 to-yellow-600" />
                      </div>
                    </div>
                  </div>
                  <div class="ml-6">
                    <div class="text-lg font-semibold text-yellow-400">{milestone.title}</div>
                    <div class="text-gray-400 text-sm mt-1">{milestone.description}</div>
                  </div>
                </div>
              ))}
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import { initReveal } from "../utils/reveal";
  initReveal("#about");
</script>

<script>
  // Counter animation ‚Äî triggers when stat cards scroll into view
  const counters = document.querySelectorAll<HTMLElement>(".counter");

  const animateCounter = (el: HTMLElement) => {
    const target = parseInt(el.dataset.target ?? "0");
    const duration = 2000;
    let startTime: number | null = null;

    const step = (timestamp: number) => {
      if (!startTime) startTime = timestamp;
      const progress = Math.min((timestamp - startTime) / duration, 1);
      el.textContent = Math.floor(progress * target) + "+";
      if (progress < 1) requestAnimationFrame(step);
    };

    requestAnimationFrame(step);
  };

  const counterObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          animateCounter(entry.target as HTMLElement);
        }
      });
    },
    { threshold: 0.5 }
  );

  counters.forEach((counter) => counterObserver.observe(counter));

  document.getElementById("about-cta")?.addEventListener("click", () => {
    document.getElementById("contact")?.scrollIntoView({ behavior: "smooth" });
  });
</script>
